
<script>
//Holds a reference to the YouTube player
var ik_player;

//this function is called by the API
window.onload = function onYouTubeIframeAPIReady() {
  //creates the player object
  var playerId = $('iframe').attr('id');
  ik_player = new YT.Player(playerId);
       
  console.log('Video API is loaded');
       
  //subscribe to events
  ik_player.addEventListener("onStateChange", "onYouTubePlayerStateChange");
}
var k = [];
function onYouTubePlayerStateChange(event) {
  var d = new Date();
  var n = d.getTime();
  k.push(n/1000);

  
function diff(ary) {
    var newA = [];
    for (var i = 1; i < ary.length; i++)  newA.push(ary[i] - ary[i - 1])
    return newA;
};


//console.log(diff(k));
var diffy = diff(k);
var ar =[];
for (var i = 0; i < diffy.length; i++) {
    if(i % 2 === 0) { 
        ar.push(diffy[i]);
    }
  //console.log(ar);
  var sum = ar.reduce(add, 0);

function add(a, b) {
    return a + b;
}

console.log(sum);
}
;
  
}
 
  
  

  
</script>


          


